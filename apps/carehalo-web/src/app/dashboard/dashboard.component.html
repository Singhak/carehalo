<div style="padding: 20px;">
  <header style="display: flex; justify-content: space-between; align-items: center;">
    <h1>Hospital Performance Dashboard</h1>
  </header>

  <div *ngIf="isLoading; else charts" style="display: flex; justify-content: center; align-items: center; height: 300px;">
    <mat-spinner></mat-spinner>
  </div>

  <ng-template #charts>
    <mat-grid-list cols="2" rowHeight="400px" gutterSize="20px">
      <mat-grid-tile>
        <mat-card class="chart-card">
          <mat-card-header>
            <mat-card-title>New vs. Revisit Patients</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <ngx-charts-pie-chart
              [view]="[350, 250]"
              [results]="patientVisitsData"
              [labels]="true"
              [doughnut]="true"
              [legend]="true"
              (select)="onSelect($event)">
            </ngx-charts-pie-chart>
          </mat-card-content>
        </mat-card>
      </mat-grid-tile>

      <mat-grid-tile>
        <mat-card class="chart-card">
          <mat-card-header>
            <mat-card-title>Patient Demographics (Age)</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <ngx-charts-bar-vertical
              [view]="[350, 250]"
              [results]="patientAgeData"
              [xAxis]="true"
              [yAxis]="true"
              [legend]="false"
              [showXAxisLabel]="true"
              [showYAxisLabel]="true"
              xAxisLabel="Age Group"
              yAxisLabel="Number of Patients"
              (select)="onSelect($event)">
            </ngx-charts-bar-vertical>
          </mat-card-content>
        </mat-card>
      </mat-grid-tile>

      <mat-grid-tile>
        <mat-card class="chart-card">
          <mat-card-header>
            <mat-card-title>Doctor Performance</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <ngx-charts-bar-horizontal
              [view]="[350, 250]"
              [results]="doctorPerformanceData"
              [xAxis]="true"
              [yAxis]="true"
              [showXAxisLabel]="true"
              [showYAxisLabel]="true"
              xAxisLabel="Number of Patients"
              yAxisLabel="Doctor"
              (select)="onSelect($event)">
            </ngx-charts-bar-horizontal>
          </mat-card-content>
        </mat-card>
      </mat-grid-tile>

      <mat-grid-tile>
        <mat-card class="chart-card">
          <mat-card-header>
            <mat-card-title>Appointment Status</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <ngx-charts-pie-chart
              [view]="[350, 250]"
              [results]="appointmentStatusData"
              [labels]="true"
              [legend]="true"
              (select)="onSelect($event)">
            </ngx-charts-pie-chart>
          </mat-card-content>
        </mat-card>
      </mat-grid-tile>

      <mat-grid-tile [colspan]="2">
        <mat-card class="chart-card">
          <mat-card-header>
            <mat-card-title>Appointments Over Time</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <ngx-charts-line-chart
              [view]="[750, 250]"
              [results]="appointmentsOverTimeData"
              [xAxis]="true"
              [yAxis]="true"
              [legend]="true"
              [showXAxisLabel]="true"
              [showYAxisLabel]="true"
              xAxisLabel="Date"
              yAxisLabel="Number of Appointments"
              (select)="onSelect($event)">
            </ngx-charts-line-chart>
          </mat-card-content>
        </mat-card>
      </mat-grid-tile>
    </mat-grid-list>
  </ng-template>
</div>
